$(document).ready(function(){function t(t){var a={description:t,complete:0,deleted:0};l=o.ref().child("tasks").push().key;var e=o.ref("tasks/"+l).set(a);e.then(function(t){$("input#newTask").val(""),$(".task-added.alert-success").fadeIn(),$("ul").append("<li data-task-id="+l+'><div class="task-display"><span class="input-group-addon"><input type="checkbox" aria-label="task-complete"></span><span class="task-text">'+a.description+' </span><i class="fa fa-pencil" data-toggle="tooltip" data-placement="top" title="Edit task"></i><i class="fa fa-remove" data-toggle="tooltip" data-placement="right" title="Remove task"></i></div><div class="task-edit" style="display:none;"><input type="text" name="edit-'+l+'" value="'+a.description+'" class="form-control"><span class="edit-icons"><i class="fa fa-undo" data-toggle="tooltip" data-placement="top" title="Undo"></i><i class="fa fa-save" data-toggle="tooltip" data-placement="right" title="Save task"></i></span></div></li>')},function(t){$(".task-added.alert-danger").fadeIn()}),setTimeout(function(){$(".alert").fadeOut("slow")},2e3)}function a(t){var a=t.attr("data-task-id"),e=t.find('input[name="edit-'+a+'"]').val(),s={description:e},i=o.ref("tasks/"+a).update(s);i.then(function(a){t.find(".task-edit").fadeOut(400,function(){$(this).siblings(".task-display").find(".task-text").text(e),$(this).siblings(".task-display").fadeIn()}),$(".task-update.alert-success").html("<strong>Woot!</strong> Task edited successfully!").fadeIn()},function(t){$(".task-update.alert-danger").html("<strong>Woops</strong>! Unable to update task. Please try again.").fadeIn()}),setTimeout(function(){$(".alert").fadeOut("slow")},2e3)}function e(t){var a={deleted:1},e=t.attr("data-task-id"),s=o.ref("tasks/"+e).update(a);s.then(function(a){t.fadeOut("slow",function(){t.remove()}),$(".task-update.alert-success").html("<strong>Woot!</strong> Task deleted successfully!").fadeIn()},function(t){$(".task-update.alert-danger").html("<strong>Woops</strong>! Unable to delete task. Please try again.").fadeIn()}),setTimeout(function(){$(".alert").fadeOut("slow")},2e3)}function s(t,a){a="undefined"==typeof a?!1:a;var e=t.attr("data-task-id"),s={complete:a?1:0},n=o.ref("tasks/"+e).update(s);n.then(function(e){i(t,a)},function(t){$(".task-update.alert-danger").html("<strong>Woops</strong>! Unable to update task. Please try again.").fadeIn(),setTimeout(function(){$(".alert").fadeOut("slow")},2e3)})}function i(t,a){a?t.addClass("complete"):t.removeClass("complete")}var n=$("form").offset().top;$(document).scroll(function(){if($(document).scrollTop()>=n-80){var t=$(".form-container").width();$("form").addClass("fixed").width(t)}else $("form").removeClass("fixed")}),$("body").on("click",'input[type="checkbox"]',function(){var t=$(this).is(":checked"),a=$(this).parents("li");s(a,t)}),$("body").on("click","i",function(){var t=$(this).parents("li");$(this).hasClass("fa-remove")?e(t):$(this).hasClass("fa-pencil")?$(this).parents(".task-display").fadeOut(400,function(){$(this).siblings(".task-edit").fadeIn()}):$(this).hasClass("fa-undo")?$(this).parents(".task-edit").fadeOut(400,function(){$(this).siblings(".task-display").fadeIn()}):$(this).hasClass("fa-save")&&a(t)});var o=firebase.database(),l="",d=[$("#defaultTask").find(".task-text").text()];o.ref("tasks").once("value").then(function(t){$.each(t.val(),function(t,a){a.deleted||(d.push(a.description),$("ul").append("<li data-task-id="+t+'><div class="task-display"><span class="input-group-addon"><input type="checkbox" aria-label="task-complete"></span><span class="task-text">'+a.description+' </span><i class="fa fa-pencil" data-toggle="tooltip" data-placement="top" title="Edit task"></i><i class="fa fa-remove" data-toggle="tooltip" data-placement="right" title="Remove task"></i></div><div class="task-edit" style="display:none;"><input type="text" name="edit-'+t+'" value="'+a.description+'" class="form-control"><span class="edit-icons"><i class="fa fa-undo" data-toggle="tooltip" data-placement="top" title="Undo"></i><i class="fa fa-save" data-toggle="tooltip" data-placement="right" title="Save task"></i></span></div></li>'),a.complete&&$('li[data-task-id="'+t+'"]').addClass("complete").find("input").attr("checked","checked"))}),$('[data-toggle="tooltip"]').tooltip()}),$("form").submit(function(a){a.preventDefault();var e=$("input#newTask").val();e=e.replace(/<(?:.|\n)*?>/gm,""),""!=e&&($.inArray(e,d)?($(".task-update.alert-danger").html("<strong>Woops</strong>! Task already exists.").fadeIn(),setTimeout(function(){$(".alert").fadeOut("slow")},2e3)):t(e))})});